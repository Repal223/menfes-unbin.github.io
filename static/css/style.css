/* Theme variables */
:root{
  --cream:#F8F4EF; --brown:#4B3C2D; --accent:#8B5E3C; --blue:#244AA5;
  --bg-color: var(--cream); --text:#2a2118; --card:#ffffffea; --muted:#6b5a49;
  --primary:var(--accent); --danger:#b03a2e; --ok:#2e7d32; --border:#e7dfd6;
  --glow:#FFD580;
  --neon:#7DF9FF;            /* cyber mint */
  --neon-pink:#FF58B0;       /* magenta glow */
  --neon-blue:#3AA0FF;       /* electric blue */
  --depth-shadow: 0 20px 60px rgba(0,0,0,.22), 0 2px 12px rgba(0,0,0,.12);
  --glass: linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.12));
}
body{background:var(--bg-color)}
body.dark{
  --bg-color:#0F0F0F; --text:#DDE6FF; --card:#1C1C1Ccc; --muted:#c9d3ff; --border:#2a2a2a;
  --neon:#8BF3FF; --neon-pink:#FF74C3; --neon-blue:#5AB8FF;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg-color);color:var(--text);font-family:'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial}

/* Futuristic aurora background (subtle) */
/* Moving gradient background */
body::before{
  content:""; position:fixed; inset:-20% -10% auto -10%; height:60vh; pointer-events:none; z-index:-1;
  background:
    radial-gradient(60% 80% at 20% 30%, rgba(139,94,60,.25), transparent 70%),
    radial-gradient(70% 60% at 80% 20%, rgba(75,60,45,.18), transparent 70%),
    radial-gradient(40% 50% at 60% 80%, rgba(139,94,60,.12), transparent 70%),
    linear-gradient(120deg, rgba(248,244,239,.2), rgba(139,94,60,.15), rgba(255,213,128,.15));
  filter: blur(30px) saturate(120%);
  animation: floatAurora 18s ease-in-out infinite alternate, hueShift 26s ease-in-out infinite alternate;
}
@keyframes floatAurora{ from{ transform: translateY(-4%)} to{ transform: translateY(6%)} }
@keyframes hueShift{ from { filter: hue-rotate(0deg) blur(30px) } to { filter: hue-rotate(12deg) blur(30px) } }

/* Cyber grid floor for depth */
body::after{
  content:""; position:fixed; inset:auto -10% -20% -10%; height:45vh; pointer-events:none; z-index:-2;
  background:
    linear-gradient(rgba(0,0,0,.0), rgba(0,0,0,.06)),
    repeating-linear-gradient(90deg, rgba(58,160,255,.18) 0 1px, transparent 1px 80px),
    repeating-linear-gradient(0deg, rgba(255,88,176,.18) 0 1px, transparent 1px 80px);
  transform: perspective(900px) rotateX(55deg) translateY(8%);
  filter: drop-shadow(0 -6px 24px rgba(0,0,0,.25));
}

.container{max-width:980px;margin:0 auto;padding:16px}
.container, .post-list{transform-style: preserve-3d}
.row-between{display:flex;align-items:center;justify-content:space-between;gap:12px}

.site-header{background:var(--card);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10; backdrop-filter: blur(10px)}
.brand{display:flex;align-items:center;gap:8px;text-decoration:none;color:var(--text);font-weight:700}
.brand .logo{width:28px;height:28px}
.nav{display:flex;gap:10px;align-items:center}
.nav-link{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:999px;border:1px solid transparent;background:transparent; position:relative}
.nav-link:hover{border-color:rgba(58,160,255,.25); color:var(--text); box-shadow: 0 0 0 2px rgba(58,160,255,.15) inset}
.nav-link:hover{border-color:var(--border);color:var(--text)}
.btn-link{cursor:pointer}

.site-footer{border-top:1px solid var(--border);margin-top:24px}
.site-footer p{color:var(--muted);font-size:14px}

.page-header h1,.page-header h2{margin:8px 0 0}
.page-header p{color:var(--muted)}

.post-list{display:grid;gap:14px}
.post-card{background:var(--card);backdrop-filter: blur(10px);border:1px solid var(--border);border-radius:16px;padding:16px; position:relative; overflow:hidden}
.post-card::before{content:""; position:absolute; inset:-1px; border-radius:16px; pointer-events:none;
  background: linear-gradient(135deg, rgba(58,160,255,.25), rgba(255,88,176,.18));
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude; padding:1px;
}
.post-card{transition: transform .2s ease, box-shadow .2s ease, filter .2s ease}
.post-card:hover{box-shadow: var(--depth-shadow); filter: saturate(1.05)}
.post-card header{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
.post-author{margin:0}
.post-meta{color:var(--muted);font-size:12px}
.post-mood{background:transparent;color:var(--accent);border:1px solid var(--border);border-radius:999px;padding:4px 10px;font-size:12px;white-space:nowrap; box-shadow: 0 0 0 1px rgba(58,160,255,.2) inset}
.post-content{margin:10px 0 8px;white-space:pre-wrap}
.post-actions{display:flex;gap:8px;flex-wrap:wrap}

.btn{background:#f1e8de;border:1px solid var(--border);color:#5c4a38;border-radius:12px;padding:10px 14px;text-decoration:none; position:relative}
.btn:hover{background:#efe5db}
.btn-primary{background:var(--primary);border:1px solid #6f4a2e;color:white;border-radius:10px;padding:8px 14px}
.btn-primary{border-radius:12px; box-shadow: 0 6px 18px rgba(139,94,60,.35)}
.btn-primary:hover{filter:brightness(0.95); box-shadow: 0 12px 28px rgba(139,94,60,.45)}
.btn-icon{background:#f1e8de;border:1px solid var(--border);color:#5c4a38;border-radius:10px;padding:6px 10px;display:inline-flex;align-items:center;gap:6px}
.btn-icon img{width:16px;height:16px}
.btn-like{background:#f9f2ea;border:1px solid var(--border);color:#5c4a38;border-radius:12px;padding:8px 12px;display:inline-flex;align-items:center;gap:6px;cursor:pointer; box-shadow:0 0 0 rgba(255,0,0,0)}
.btn-like:hover{background:#f1e8de; box-shadow:0 6px 18px rgba(255, 71, 87, .35)}
.btn-like.liked{background:#ffe9ee; box-shadow:0 0 16px rgba(255,71,87,.5)}
.btn-like.liked img{filter: hue-rotate(-20deg) saturate(3)}
.btn-icon.share:hover{box-shadow:0 0 12px rgba(64, 156, 255, .35)}
#themeToggle .ico{ text-shadow:0 0 10px var(--glow) }
.btn,.btn-icon,.btn-like,.fab{transition: transform .14s ease, box-shadow .14s ease}
.btn:hover,.btn-icon:hover,.btn-like:hover{box-shadow:0 6px 18px rgba(0,0,0,.08)}
.fab{box-shadow:0 12px 28px rgba(0,0,0,.25), 0 0 0 1px rgba(139,94,60,.25) inset}
.btn-sm{font-size:12px;padding:6px 8px;border-radius:8px;border:1px solid var(--border);background:#f1e8de;color:#5c4a38;text-decoration:none}
.btn-sm.danger{border-color:#8e3a2a;background:#f7e6e3;color:#8e3a2a}

.empty{padding:18px;border:1px dashed var(--border);border-radius:10px;color:var(--muted);background:#faf6f2}
body.dark .empty{background:#2f2822}

.fab{position:fixed;right:20px;bottom:20px;width:56px;height:56px;border-radius:16px;display:flex;align-items:center;justify-content:center;background:var(--primary);color:#fff;text-decoration:none;font-size:28px;box-shadow:0 16px 36px rgba(0,0,0,.3), 0 0 0 1px rgba(139,94,60,.25) inset; animation: float 6s ease-in-out infinite}
@keyframes float{ 0%{ transform: translateY(0)} 50%{ transform: translateY(-4px)} 100%{ transform: translateY(0)} }

.form{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;max-width:740px}
.row{display:flex;flex-direction:column;margin-bottom:12px}
label{font-weight:600;margin-bottom:6px}
input,textarea,select{background:#fff;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px}
body.dark input,body.dark textarea,body.dark select{background:#3a3129;color:var(--text)}
.actions{display:flex;gap:10px}

.flash-container{display:grid;gap:8px;margin-bottom:10px}
.flash{padding:10px 12px;border-radius:10px}
.flash.success{background:#eaf7ef;color:#226b39;border:1px solid #c9e8d3}
.flash.error{background:#fdecea;color:#a23b2a;border:1px solid #f5c6bf}
.flash.info{background:#efe7df;color:#5c4a38;border:1px solid var(--border)}

.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:10px 0}
.stat{background:#f7efe7;border:1px solid var(--border);border-radius:14px;padding:14px;display:flex;align-items:center;gap:12px; position:relative; overflow:hidden}
.stat::after{content:""; position:absolute; inset: -1px; border-radius:14px; pointer-events:none; background: linear-gradient(135deg, rgba(58,160,255,.22), rgba(255,88,176,.12)); mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite: exclude; padding:1px}
.stat img{width:18px;height:18px}
.stat span{font-size:22px;font-weight:700}
.stat small{display:block;color:var(--muted)}

.table-wrap{overflow:auto;background:var(--card);border:1px solid var(--border);border-radius:12px}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
thead th{position:sticky;top:0;background:#f1e8de}
body.dark thead th{background:#3a3129}

.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:#5c4a38}
.badge{padding:4px 8px;border-radius:999px;border:1px solid var(--border);font-size:12px}
.badge{ background-color:#244AA5; color:white; padding:3px 6px; border-radius:6px; font-size:.7em }
.badge.ok{background:#eaf7ef;border-color:#c9e8d3;color:#226b39}
.badge.warn{background:#fdecea;border-color:#f5c6bf;color:#a23b2a}
.hint{color:var(--muted);font-size:12px;margin-top:8px}
.spacer{height:6px}

/* Theme toggle icon */
#themeToggle{position:relative; overflow:hidden}
#themeToggle .ico{display:inline-block; font-size:16px; filter: drop-shadow(0 0 4px rgba(139,94,60,.45))}
#themeToggle.pulse{animation: pulse .6s ease}
@keyframes pulse{from{transform:scale(.9)} to{transform:scale(1)}}

/* Toast notifications */
.toast-wrap{position:fixed; right:18px; bottom:18px; display:grid; gap:10px; z-index:9999}
.toast{display:flex; align-items:center; gap:10px; padding:12px 14px; border-radius:14px; border:1px solid rgba(255,255,255,.25);
  background:linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.12)); backdrop-filter: blur(10px);
  color:var(--text); transform: translateY(8px) scale(.98); opacity:0; transition: opacity .3s ease, transform .3s ease;
  box-shadow: 0 12px 32px rgba(0,0,0,.22), 0 0 0 1px rgba(139,94,60,.15) inset;}
.toast.in{transform: translateY(0) scale(1); opacity:1; transition-duration:.3s}
.toast .ico{font-size:16px}
.toast .toast-logo{width:20px; height:20px; border-radius:4px; box-shadow:0 0 0 1px rgba(0,0,0,.08) inset}
.toast.admin{box-shadow: 0 14px 36px rgba(36,74,165,.35), 0 0 0 1px rgba(36,74,165,.25) inset}

/* Simple popup class (compat) */
.popup{position:fixed; right:20px; bottom:20px; background: var(--card); border:1px solid var(--border); padding:12px 14px; border-radius:12px; box-shadow: var(--depth-shadow)}

/* Comments enhancements */
.comment-list{list-style:none; padding:0; margin:12px 0; display:grid; gap:10px}
.comment-item{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:10px 12px}
.comment-meta{font-size:12px; color:var(--muted)}
.comment-admin{border-color:#d3b89f; box-shadow:0 0 0 2px rgba(139,94,60,.15) inset}
.badge-admin{font-size:11px; color:#c47d3f; border:1px solid #e7c6a2; border-radius:999px; padding:2px 8px; background:#fff6ed}
body.dark .badge-admin{background:#3a3129}
/* Mentions + BEM badge */
.mention{color: var(--blue); font-weight:600}
.badge-bem{font-size:11px; color:#1f4ea3; border:1px solid rgba(36,74,165,.35); border-radius:999px; padding:2px 8px; background: rgba(36,74,165,.08)}
body.dark .badge-bem{background: rgba(36,74,165,.18)}

/* Responsive tweaks */
@media (max-width: 720px){
  .stats-grid{grid-template-columns:1fr 1fr}
  .nav{gap:6px}
  .brand span{display:none}
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{animation:none!important; transition:none!important}
}

/* Reveal */
.reveal{opacity:0; transform: translateY(10px); transition: opacity .4s ease, transform .4s ease}
.reveal.reveal-in{opacity:1; transform: translateY(0)}
.typing-hint{font-size:12px; color:var(--muted); margin-top:6px; opacity:0; transition: opacity .3s ease}

/* Page transitions */
body.fade-in{animation: fadeIn .2s ease both}
body.fade-out{animation: fadeOut .18s ease both}
@keyframes fadeIn{ from{ opacity:0 } to{ opacity:1 } }
@keyframes fadeOut{ from{ opacity:1 } to{ opacity:0 } }

/* 3D tilt base to reduce jitter */
.post-card, .btn, .btn-icon, .fab{ will-change: transform }
