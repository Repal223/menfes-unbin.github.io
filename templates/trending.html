{% extends 'base.html' %}
{% block content %}
<section class="page-header">
  <h2>Trending</h2>
  <p>Postingan terpopuler berdasarkan jumlah like dan komentar.</p>
  <a class="btn" href="/">Kembali</a>
  <div class="spacer"></div>
</section>

<section class="post-list">
  {% if not posts %}
    <div class="empty">Belum ada menfess.</div>
  {% else %}
    {% for p in posts %}
      <article class="post-card" id="post-{{ p.id }}">
        <header>
          <div>
            <h3 class="post-author">{{ p.name }}</h3>
            <div class="post-meta">To: <strong>{{ p.to }}</strong> &middot; <span data-wib="{{ p.created_iso }}">{{ p.created_at }}</span></div>
          </div>
          <div class="post-mood">{{ p.mood }}</div>
        </header>
        <div class="post-content">{{ p.content }}</div>
        <footer class="post-actions">
          <button class="btn-like" data-id="{{ p.id }}">
            <img src="{{ url_for('static', filename='images/icons/heart.svg') }}" alt="like"> <span class="like-count">{{ p.likes }}</span>
          </button>
          <a class="btn-icon" href="{{ url_for('post_detail', post_id=p.id) }}">
            <img src="{{ url_for('static', filename='images/icons/comment.svg') }}" alt="comment"> {{ p.comments_count }}
          </a>
          <button class="btn-icon share" data-id="{{ p.id }}" data-link="{{ url_for('post_detail', post_id=p.id, _external=True) }}">
            <img src="{{ url_for('static', filename='images/icons/share.svg') }}" alt="share"> Bagikan
          </button>
          <a class="btn" href="{{ url_for('post_detail', post_id=p.id) }}">Lihat Detail</a>
        </footer>
      </article>
    {% endfor %}
  {% endif %}
</section>
{% endblock %}


